{% extends 'base.html' %}
{% load static %}



{% block content %}

{% if not user_data and current_path != '/profile/' %}
<div class="container d-flex align-items-center justify-content-center mt-3" style="height: 80vh;">
    <div class="row">
        <h1 class="text-h4-custom">К сожалению такого пользовтеля не существует!</h1>
    </div>
</div>
{% else %}

    

    <div class="container mt-3">

        {% if user_data.id == user.id%}
        <div class="offset-button-panel">
            <div class="row d-flex justify-content-left">
                <div class="col-1">
                    <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#staticBackdrop" aria-controls="staticBackdrop">
                        <img src="{% static 'images/button-bi.svg' %}" alt="Панель инструментов" >
                    </button>
                </div>
            </div>
        </div>
        {% endif %}
        
        

        <div class="row d-flex justify-content-center">
            <div class="col-12 col-lg-3 mt-5">
                <div class="row d-flex justify-content-center">
                    <div class="col-3 col-md-6 col-lg-12  profile-picture me-4">

                            {% if user_data.id == user.id %}
                                <label for="upload_photo">
                                    <img src="/media/photo_profile/{{user.photo_profile}}" alt="Изображение профиля" style="cursor: pointer;"> 
                                </label>

                                <input id="upload_photo" type="file" accept=".jpg,.jpeg,.png" name="upload_file" style="display: none;visibility: none;" onchange="uploadPhotoProfile('{{ user.id }}', this)">
                            {% else %}
                                <img src="/media/photo_profile/{{user_data.photo_profile}}" alt="Изображение профиля" style="cursor: pointer;"> 
                            {% endif %}

                    </div>

                    <div class="col-9 col-md-6 col-lg-12">
                        {% if user_data.id == user.id%}
                            <h1 class="text-h3-custom">{{user.fullName}}</h1>
                            <h1 class="text-h5-custom">{{user.username}}</h1>
                            <h1 class="text-h5-custom">{{user.userPlaceOfStudy}}</h1>
                            <h1 class="text-h5-custom">Тип аккаунта: {{user.type_user}}</h1>
                        {% else %}
                            <h1 class="text-h3-custom">{{user_data.fullName}}</h1>
                            <h1 class="text-h5-custom">{{user_data.username}}</h1>
                            <h1 class="text-h5-custom">{{user_data.userPlaceOfStudy}}</h1>
                            <h1 class="text-h5-custom">Тип аккаунта: {{user_data.type_user}}</h1>
                        {% endif %}
                        
                    </div>
                </div>

            </div>


            {% if user.type_user == 'Предприниматель' and user_data.id == user.id or user_data.type_user == 'Предприниматель' and user_data.id != user.id%}

                {% if user_data.id == user.id%}
                <div class="col-12 col-lg-9 p-5 d-flex align-items-center justify-content-center text-center" >
                    <div class="row">
                        <div class="col-12">
                            <h1 class="text-h5-custom">Вы не добавили ни одного проекта</h1>
                            <button type="button" class="btn btn-outline-light content-text-custom me-2 button2-animation mt-2">ДОБАВИТЬ</button>

                        </div>
                    </div>
                </div>
                {% else %}
                <div class="col-12 col-lg-9 p-5 d-flex align-items-center justify-content-center text-center" >
                    <div class="row">
                        <div class="col-12">
                            <h1 class="text-h5-custom">У данного пользователя пока нет проектов.</h1>
                        </div>
                    </div>
                </div>
                {% endif %}
            
                


            

            {% else %}

                {% if not questionnaire %}

                    {% if user_data.id == user.id %}
                        <div class="col-12 col-lg-9 p-5 d-flex align-items-center justify-content-center text-center">
                            <div class="row">
                                <div id="questionnaire_panel">
                                    <div class="col-12">
                                        <h1 class="text-h5-custom">Для публикации ваших данных вам необходимо заполнить анкету.</h1>
                                        <button type="button" class="btn btn-outline-light content-text-custom me-2 button2-animation mt-2" onclick="showQuestionnairePanel()">ЗАПОЛНИТЬ</button>
                    
                                    </div>
                                </div>

                                <div id="questionnaire_form_block" style="display: none;">
                                    <form class="form-border" name="questionnaire_form" id="questionnaire_form">
                                        {% csrf_token %}
                                        <div class="mb-3">
                                        <label for="exampleInputEmail1" class="form-label text-h4-custom">ЖЕЛАЕМАЯ РАБОТА (должность)</label>
                                        <textarea type="text" name="new_work" class="form-control" rows="3"></textarea>
                                        </div>

                                        <div class="dropdown mb-3">
                                            <label for="exampleInputPassword1" class="form-label text-h4-custom">ЖЕЛАЕМАЯ СФЕРА РАБОТЫ</label>
                                            <button class="btn btn-outline-light dropdown-toggle text-h4-custom" type="button" data-bs-toggle="dropdown" aria-expanded="false"  style="width: 100%;" id="areaOfWork">Веб-аналитик</button>
                                            <ul class="dropdown-menu text-center bg-dark" style="width: 100%; max-height: 200px; overflow-y: auto;" id="profession_list">
                                              
                                            </ul>
                                        </div>
                    
                                        <div class="mb-3">
                                        <label for="exampleInputPassword1" class="form-label text-h4-custom">КЕМ РАБОТАЛИ РАНЬШЕ</label>
                                        <textarea type="text" name="old_work" class="form-control" rows="3"></textarea>
                                        </div>
                    
                                        <div class="mb-3">
                                        <label for="exampleInputPassword1" class="form-label text-h4-custom">ЕСТЬ ЛИ У ВАС ОПЫТ РАБОТЫ</label>
                                        <textarea type="text" name="experience" class="form-control" rows="3"></textarea>
                                        </div>

                                        <div class="mb-3">
                                            <input class="form-check-input mt-2" type="checkbox" name="freework" value="" id="flexCheckDefault" onclick="showHideSalaryField(this)">
                                            <label class="form-check-label text-h4-custom " for="flexCheckDefault"> РАБОТА ЗА ИДЕЮ (FREEWORK)</label>
                                        </div>

                                        <div class="mb-3" id="solary_field">
                                            <label for="exampleInputPassword1" class="form-label text-h4-custom">ЖЕЛАЕМАЯ ЗАРПЛАТА (RUB)</label>
                                            <input type="text" name="salary" class="form-control">
                                        </div>
                    
                                        <btn  class="btn btn-outline-light mt-2" style="width: 100%; font-weight: 500; font-size: 16pt;" onclick="sendQuestionnaire('{{ user.id }}')">ОТПРАВИТЬ</btn>
                    
                                        <h3 class="text-h6-custom text-center text-danger mt-3" id="field_validation"></h3>
                    
                                    </form>
                                </div>
                            </div>
                        </div>

                    {% else %}

                        <div class="col-12 col-lg-9 p-5 d-flex align-items-center justify-content-center text-center" >
                            <div class="row">
                                <div class="col-12">
                                    <h1 class="text-h5-custom">У данного пользователя пока нет анкеты.</h1>
                                </div>
                            </div>
                        </div>

                    {% endif %}

                {% else %}

                <div class="col-12 col-lg-9">
                    <div class="row d-flex justify-content-center">
                        <div class="col-12 text-center">
                            <h1 class="text-h4-custom">АНКЕТА ПОЛЬЗОВАТЕЛЯ</h1>
                        </div>
                    </div>

                    <hr class="custom-hr">

                    <div class="row d-flex justify-content-center mt-5 mb-5 text-center"  style="text-transform: uppercase;">
                        <div class="col-6 side-borders">
                            <h1 class="text-h4-custom">Желаю работать в теме: </h1>
                            <h1 class="text-h5-custom m-2" >{{questionnaire.new_work}}</h1>
                        </div>
                        <div class="col-6 side-borders">
                            <h1 class="text-h4-custom " >Желаемая сфера работы: </h1>
                            <h1 class="text-h5-custom m-2">{{questionnaire.areaOfWork}}</h1>
                        </div>
                    </div>

                    <hr class="custom-hr">

                    <div class="row d-flex justify-content-center mt-5 mb-5 text-center" style="text-transform: uppercase;">
                        <div class="col-6 side-borders">
                            <h1 class="text-h4-custom">Прежде работал: </h1>
                            <h1 class="text-h5-custom m-2">{{questionnaire.old_work}}</h1>
                        </div>
                        <div class="col-6 side-borders">
                            <h1 class="text-h4-custom ">Имею ли опыт работы?: </h1>
                            <h1 class="text-h5-custom m-2">{{questionnaire.experience}}</h1>
                        </div>
                    </div>

                    <hr class="custom-hr">


                    <div class="row d-flex justify-content-center mt-5 mb-5 text-center" style="text-transform: uppercase;">
                        
                        <div class="col-6 side-borders">
                            <h1 class="text-h4-custom text-center" >Желаемая зарплата: </h1>
                            <h1 class="text-h5-custom m-2 text-center">{{questionnaire.salary}} рублей</h1>
                        </div>
                        <div class="col-6 side-borders"></div>
                    </div>

                    <hr class="custom-hr">


                </div>

                {% endif %}

            {% endif %}
            
        </div>
    </div>

    {% if user_data.id == user.id %}

        <div class="sidebar">
            <div class="container-fluid">
                <div class="row mt-3 d-flex justify-content-center text-center">
                    <div class="col-6 p-1 text-light">

                        <a href="#" type="button" class="btn btn-dark text-h5-custom button2-animation mt-2" >
                            <img src="{% static 'images/projects-icon.png' %}" class="icon-panel" alt="Проекты"> ПРОЕКТЫ
                        </a>

                        <a href="{% url 'questionnairesPage' %}" type="button" class="btn btn-dark text-h5-custom button2-animation mt-2" >
                            <img src="{% static 'images/application-icon.png' %}" class="icon-panel" alt="Проекты"> АНКЕТЫ
                        </a>

                    </div>
                </div>
            </div>
        </div>
      
    
    
    <div class="offcanvas-custom">
        <div class="offcanvas offcanvas-start bg-dark" data-bs-backdrop="static" tabindex="-1" id="staticBackdrop" aria-labelledby="staticBackdropLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title text-h5-custom" id="staticBackdropLabel">Меню</h5>
                <div data-bs-theme="dark">
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"  aria-label="Close"></button>
                </div>
            </div>
            <div class="offcanvas-body">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 text-light">
            
                            <a href="#" type="button" class="btn btn-dark text-h5-custom button2-animation mt-2" >
                                <img src="{% static 'images/projects-icon.png' %}" class="icon-panel" alt="Проекты"> ПРОЕКТЫ
                            </a>
            
                            <a href="{% url 'questionnairesPage' %}" type="button" class="btn btn-dark text-h5-custom button2-animation mt-2" >
                                <img src="{% static 'images/application-icon.png' %}" class="icon-panel" alt="Проекты"> АНКЕТЫ
                            </a>

            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% endif %}

{% endif %}


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="{% static 'js/main/ScrollTrigger.min.js' %}"></script>
<script src="{% static 'js/main/gsap.min.js' %}"></script>
<script src="{% static 'js/profile/profile_animation.js' %}"></script>
<script src="{% static 'js/data.js' %}"></script>
<script src="{% static 'js/profile/logic.js' %}"></script>
<script src="{% static 'js/profile/ajax.js' %}"></script>

{% if not user.is_authenticated %}
    <script>
        window.location.replace("/auth/");
    </script>
{% endif %}

{% endblock %}

