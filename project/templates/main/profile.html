{% extends 'base.html' %}
{% load static %}



{% block content %}


<div class="container mt-3">
    <div class="row d-flex justify-content-center">
        <div class="col-12 col-lg-3">
            <div class="row d-flex justify-content-center">
                <div class="col-12 profile-picture me-4">
                    <label for="upload_photo">
                        <img src="/media/photo_profile/{{user.photo_profile}}" alt="Изображение профиля" style="cursor: pointer;"> 
                    </label>

                    <input id="upload_photo" type="file" accept=".jpg,.jpeg,.png" name="upload_file" style="display: none;visibility: none;" onchange="uploadPhotoProfile('{{ user.id }}', this)">
                </div>
            </div>
            <div class="row d-flex justify-content-center text-left mt-2">
                <div class="col-12">
                    <h1 class="text-h3-custom">{{user.fullName}}</h1>
                    <h1 class="text-h5-custom">{{user.username}}</h1>
                    <h1 class="text-h5-custom">{{user.userPlaceOfStudy}}</h1>
                    <h1 class="text-h5-custom">Тип аккаунта: {{user.type_user}}</h1>
                </div>
            </div>

        </div>

        {% if user.type_user == 'Предприниматель' %}
        <div class="col-12 col-lg-9 p-5 d-flex align-items-center justify-content-center text-center" style="min-height: 400px; border: 2px solid #36363670; border-radius: 20px;">
            <div class="row">
                <div class="col-12">
                    <h1 class="text-h5-custom">Вы не добавили ни одного проекта</h1>
                    <button type="button" class="btn btn-outline-light content-text-custom me-2 button2-animation mt-2">ДОБАВИТЬ</button>

                </div>
            </div>
        </div>

        {% else %}
        <div class="col-12 col-lg-9 p-5 d-flex align-items-center justify-content-center text-center" style="min-height: 400px; border: 2px solid #36363670; border-radius: 20px;">
            <div class="row">
                <div id="questionnaire_panel">
                    <div class="col-12">
                        <h1 class="text-h5-custom">Для публикации ваших данных вам необходимо заполнить анкету.</h1>
                        <button type="button" class="btn btn-outline-light content-text-custom me-2 button2-animation mt-2" onclick="showQuestionnairePanel()">ЗАПОЛНИТЬ</button>
    
                    </div>
                </div>

                <div id="questionnaire_form_block" style="display: none;">
                    <form class="form-border" name="questionnaire_form" id="questionnaire_form">
                        {% csrf_token %}
                        <div class="mb-3">
                          <label for="exampleInputEmail1" class="form-label text-h4-custom">ЖЕЛАЕМАЯ РАБОТА (должность)</label>
                          <textarea type="text" name="new_work" class="form-control" rows="3"></textarea>
                        </div>
    
                        <div class="mb-3">
                          <label for="exampleInputEmail1" class="form-label text-h4-custom">ЖЕЛАЕМАЯ СФЕРА РАБОТЫ</label>
                          <textarea type="text" name="areaOfWork" class="form-control" rows="3"></textarea>
                        </div>
    
                        <div class="mb-3">
                          <label for="exampleInputPassword1" class="form-label text-h4-custom">КЕМ РАБОТАЛИ РАНЬШЕ</label>
                          <textarea type="text" name="old_work" class="form-control" rows="3"></textarea>
                        </div>
    
                        <div class="mb-3">
                          <label for="exampleInputPassword1" class="form-label text-h4-custom">ЕСТЬ ЛИ У ВАС ОПЫТ РАБОТЫ</label>
                          <textarea type="text" name="experience" class="form-control" rows="3"></textarea>
                        </div>

                        <div class="mb-3">
                            <input class="form-check-input mt-2" type="checkbox" name="freework" value="" id="flexCheckDefault" onclick="showHideSalaryField(this)">
                            <label class="form-check-label text-h4-custom " for="flexCheckDefault"> РАБОТА ЗА ИДЕЮ (FREEWORK)</label>
                        </div>

                        <div class="mb-3" id="solary_field">
                            <label for="exampleInputPassword1" class="form-label text-h4-custom">ЖЕЛАЕМАЯ ЗАРПЛАТА</label>
                            <input type="text" name="salary" class="form-control">
                        </div>
    
                        <btn  class="btn btn-outline-light mt-2" style="width: 100%; font-weight: 500; font-size: 16pt;" onclick="sendQuestionnaire('{{ user.id }}')">ОТПРАВИТЬ</btn>
    
                        <h3 class="text-h6-custom text-center text-danger mt-3" id="field_validation"></h3>
    
                    </form>
                </div>
            </div>
        </div>
        {% endif %}
        
    </div>
</div>

<div class="sidebar shadow">
    <div class="container-fluid">
        <div class="row mt-3 d-flex justify-content-center text-center">
            <div class="col-12 p-1 text-light">

                <a href="#" type="button" class="btn btn-dark text-h5-custom button2-animation mt-2" style="width: 90%;">
                    <img src="{% static 'images/projects-icon.png' %}" class="icon-panel" alt="Проекты"> Проекты
                </a>

                <a href="#" type="button" class="btn btn-dark text-h5-custom button2-animation mt-2" style="width: 90%;">
                    <img src="{% static 'images/application-icon.png' %}" class="icon-panel" alt="Проекты"> Анкеты
                </a>

            </div>
        </div>
    </div>
</div>



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="{% static 'js/main/ScrollTrigger.min.js' %}"></script>
<script src="{% static 'js/main/gsap.min.js' %}"></script>
<script src="{% static 'js/profile/profile_animation.js' %}"></script>
<script src="{% static 'js/profile/logic.js' %}"></script>
<script src="{% static 'js/profile/ajax.js' %}"></script>

{% if not user.is_authenticated %}
    <script>
        window.location.replace("/auth/");
    </script>
{% endif %}

{% endblock %}

